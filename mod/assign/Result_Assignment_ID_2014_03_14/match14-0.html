<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>Syed Hassaan_Tauqeer_Bacteria Colony.cpp</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff">
<HR>
<H3><CENTER>Syed Hassaan_Tauqeer_Bacteria Colony.cpp</CENTER></H3><HR>
<PRE>
//By Syed Hassaan Tauqeer. M.Saad helped with the bugs
 
#include&lt;stdio.h&gt;
#include&lt;string.h&gt;


int row,col;
<A NAME="0"></A>
void startDisp(void){
	printf(&quot;Welcome to a simulation of the lifecycle of a bacteria colony.\nCells (X) live and die by the following rules:\n- A cell with 1 or fewer neighbors dies.\n- Locations with 2 neighbors remain stable.\n- Locations with 3 neighbors will create life.\n- A cell with 4 or more neighbors dies.\nGrid input file name?&quot;);   //display
<FONT color="#0000ff"><A HREF="javascript:ZweiFrames('match14-1.html#0',3,'match14-top.html#0',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>}


char**memReserve(int arrRows, int arrCol)
{
	char **matrix = new char*[arrRows];   //memory allocation
	for (int i = 0; i&lt;arrRows; i++) {
		matrix[i] = new char[arrCol];
	}
	return matrix;
<A NAME="1"></A>}</B></FONT>


<FONT color="#f63526"><A HREF="javascript:ZweiFrames('match14-1.html#1',3,'match14-top.html#1',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>void emptyMem(char **matrix) {
	for (int i = 0; i&lt;row; i++) {           //freeing memory
		delete matrix[i];
	}
	delete[] matrix;
}</B></FONT>


void disp(char **matrix) {
	for (int i = 0; i&lt;row; i++) {
		printf(&quot;%s\n&quot;,matrix[i]);
		}
	}



char** readFile() {
	char fname[50];
	fflush(stdin);
	gets(fname);

	FILE * fileptr;

	fileptr=fopen(fname,&quot;r&quot;);

	if(fileptr==NULL)

	{printf(&quot;UNABLE TO OPEN FILE!!&quot;);
	getchar();
	return 0;
	}



	else {
		fscanf(fileptr, &quot;%d\n%d&quot;, &amp;row, &amp;col);
		char **matrix = memReserve(row, col + 1);
		for (int i = 0; i&lt;row; i++) {
<A NAME="2"></A>			fscanf(fileptr,&quot;%s&quot;,matrix[i]);
		}
		return matrix;
<FONT color="#77bfc7"><A HREF="javascript:ZweiFrames('match14-1.html#2',3,'match14-top.html#2',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>	}
}



char** Surround_check(char** mat_form, char** TEMP_mat, char obj, int ROW, int COL) {           
	int surround_count = 0;                                                                          
	switch (obj) {                                                                             
	case '-':
		if ((ROW - 1) &gt;= 0 &amp;&amp; (COL - 1) &gt;= 0) surround_count = (TEMP_mat[ROW - 1][COL - 1] == 'X') ? surround_count + 1 : surround_count;
		if ((ROW - 1) &gt;= 0)                  surround_count = (TEMP_mat[ROW - 1][COL] == 'X') ? surround_count + 1 : surround_count;
		if ((ROW - 1) &gt;= 0 &amp;&amp; (COL + 1)&lt;col)  surround_count = (TEMP_mat[ROW - 1][COL + 1] == 'X') ? surround_count + 1 : surround_count;
		if ((COL - 1) &gt;= 0)                  surround_count = (TEMP_mat[ROW][COL - 1] == 'X') ? surround_count + 1 : surround_count;
		if ((COL + 1)&lt;col)                  surround_count = (TEMP_mat[ROW][COL + 1] == 'X') ? surround_count + 1 : surround_count;
		if ((ROW + 1)&lt;row &amp;&amp; (COL - 1) &gt;= 0)  surround_count = (TEMP_mat[ROW + 1][COL - 1] == 'X') ? surround_count + 1 : surround_count;
		if ((ROW + 1)&lt;row)                  surround_count = (TEMP_mat[ROW + 1][COL] == 'X') ? surround_count + 1 : surround_count;
		if ((ROW + 1)&lt;row &amp;&amp; (COL + 1)&lt;col)   surround_count = (TEMP_mat[ROW + 1][COL + 1] == 'X') ? surround_count + 1 : surround_count;

		if (surround_count == 3)
			mat_form[ROW][COL] = 'X';
		break;
	case 'X':
		if ((ROW - 1) &gt;= 0 &amp;&amp; (COL - 1) &gt;= 0) surround_count = (TEMP_mat[ROW - 1][COL - 1] == 'X') ? surround_count + 1 : surround_count;
		if ((ROW - 1) &gt;= 0)                  surround_count = (TEMP_mat[ROW - 1][COL] == 'X') ? surround_count + 1 : surround_count;
		if ((ROW - 1) &gt;= 0 &amp;&amp; (COL + 1)&lt;col)  surround_count = (TEMP_mat[ROW - 1][COL + 1] == 'X') ? surround_count + 1 : surround_count;
		if ((COL - 1) &gt;= 0)                  surround_count = (TEMP_mat[ROW][COL - 1] == 'X') ? surround_count + 1 : surround_count;
		if ((COL + 1)&lt;col)                  surround_count = (TEMP_mat[ROW][COL + 1] == 'X') ? surround_count + 1 : surround_count;
		if ((ROW + 1)&lt;row &amp;&amp; (COL - 1) &gt;= 0)  surround_count = (TEMP_mat[ROW + 1][COL - 1] == 'X') ? surround_count + 1 : surround_count;
		if ((ROW + 1)&lt;row)                  surround_count = (TEMP_mat[ROW + 1][COL] == 'X') ? surround_count + 1 : surround_count;
		if ((ROW + 1)&lt;row &amp;&amp; (COL + 1)&lt;col)      surround_count = (TEMP_mat[ROW + 1][COL + 1] == 'X') ? surround_count + 1 : surround_count;

		if ((surround_count &lt;= 1) || (surround_count &gt;= 4))
			mat_form[ROW][COL] = '-';
		break;
	}
<A NAME="3"></A>	return mat_form;
}</B></FONT>

<FONT color="#6cc417"><A HREF="javascript:ZweiFrames('match14-1.html#3',3,'match14-top.html#3',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>char** New_form(char **matrix) {
	char** temp = memReserve(row, col + 1);                                    
	for (int i = 0; i&lt;row; i++) {
		for (int j = 0; j&lt;col + 1; j++) {
			temp[i][j] = matrix[i][j];
		}
	}

	for (int i = 0; i&lt;row; i++) {
		for (int j = 0; j&lt;col; j++) {
			matrix = Surround_check(matrix, temp, temp[i][j], i, j);
		}
	}
	emptyMem(temp);
	return matrix;
}




int main() {
	char opt;
	startDisp();
	char** matrix = readFile();
	if (matrix == NULL) {
		printf(&quot;\nError! Unable to read file. &quot;);

		return 0;
	}
	
	while(1){
disp(matrix);
		printf(&quot;\nt)ick, q)uit? \n&quot;);
		scanf(&quot;%c&quot;,&amp;opt);
		
		if (opt == 't')</B></FONT>
		{
			New_form(matrix);
		}
		else
			if(opt=='q')
				return 0;
		}
	
	emptyMem(matrix);
	getchar();
	return 0;
}
</PRE>
</BODY>
</HTML>
