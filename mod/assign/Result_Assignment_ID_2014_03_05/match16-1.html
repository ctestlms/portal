<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>Mohsin_Latif_Source.cpp</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff" style="margin-left:25">
<HR>
<H3><CENTER>Mohsin_Latif_Source.cpp</CENTER></H3><HR>
<PRE>
/* Assignment # 1 
 * Course: Object Oriented Programming
 * Name: Bacterial Colony Growth
 * Due Date: February 21, 2014
 * Author : Mohsin Latif		Reg# 07460
 * Class : BS(CS)-3A [2nd-semester] , Instructor : Dr. Tahir Azeem
 * Disclaimer : All copy rights reserved. The source code is a property of Mohsin Latif. All acknowledgements are mentioned in the comments.
 */
<A NAME="2"></A>#include &lt;iostream&gt;
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
<FONT color="#77bfc7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match16-0.html#2',2,'match16-top.html#2',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>void display (char **colony, unsigned int NO_OF_ROWS, unsigned int NO_OF_COLS)	// display(); for displaying the bactarial colony simulation
{
	printf(&quot;\n&quot;);
	for (unsigned int i = 0; i &lt; NO_OF_ROWS ; i++)	{
		for(unsigned int j=0; j&lt; NO_OF_COLS; j++) {</B></FONT>
<A NAME="5"></A>			printf(&quot;%c&quot;,colony[i][j]);
		}
		printf(&quot;\n&quot;);
<FONT color="#c8c2a7"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match16-0.html#5',2,'match16-top.html#5',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>	}
}
void fileInput (FILE *fptr, char **A, unsigned int NO_OF_ROWS, unsigned int NO_OF_COLS)	//function to input file content and storing in array
{
	while (!feof(fptr)) {
		for (unsigned int i = 0; i &lt; NO_OF_ROWS; i++)	{
			for (unsigned int j = 0; j &lt; NO_OF_COLS; j++)	{
				fscanf(fptr, &quot;%c&quot; , &amp;A[i][j]); 
			}
			fscanf(fptr,&quot;\n&quot;);	
<A NAME="0"></A>		}
	}
}</B></FONT>
<FONT color="#0000ff"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match16-0.html#0',2,'match16-top.html#0',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>void Array_shift (char **Array1 , char **Array2, unsigned int NO_OF_ROWS, unsigned int NO_OF_COLS)	//for copying the array elements to the other
{
<A NAME="3"></A>	for (unsigned int i = 0; i &lt; NO_OF_ROWS ; i++) {
		for (unsigned int j = 0; j &lt; NO_OF_COLS; j++) {
			Array1[i][j] = Array2[i][j];</B></FONT>
<FONT color="#6cc417"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match16-0.html#3',2,'match16-top.html#3',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>		}
	}
}
void Check_condition (char **A , char **B, unsigned int i, unsigned int j, unsigned int ini_val_loop1, unsigned int limit_val_loop1, unsigned int ini_val_loop2, unsigned int limit_val_loop2 )
{
	unsigned int count = 0;
	for (unsigned int x = ini_val_loop1; x &lt;= limit_val_loop1; x++)
	{
		for (unsigned int y = ini_val_loop2; y &lt;= limit_val_loop2; y++)
		{
<A NAME="4"></A>			if(x == i &amp;&amp; y == j) </B></FONT>
				continue;

<FONT color="#151b8d"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match16-0.html#4',2,'match16-top.html#4',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>			if(A[x][y] == 'X') {
				count++;
				continue;
			}
		}
	}
	if(count &lt;= 1 || count &gt;=4) {
		B[i][j] = '-';
	}							//if count ==  2 the location remains stable , no change occur
	if(count == 3) {</B></FONT>
		B[i][j] = 'X';
	}
}
void simulation_algorithm (char **A , char **B, unsigned int NO_OF_ROWS, unsigned int NO_OF_COLS)
<A NAME="1"></A>{
	Array_shift(B, A, NO_OF_ROWS, NO_OF_COLS);	//copying the elements of array B to A

<FONT color="#f63526"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match16-0.html#1',2,'match16-top.html#1',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>	for (unsigned int i = 0; i &lt; NO_OF_ROWS; i++)
	{
		for (unsigned int j = 0; j &lt; NO_OF_COLS ; j++)
		{
			if((i &gt; 0 &amp;&amp; i &lt; (NO_OF_ROWS-1)) &amp;&amp; (j &gt; 0 &amp;&amp; j &lt; (NO_OF_COLS-1)))	{		//for any location with 8 neighbours</B></FONT>
				Check_condition (A, B, i, j, (i-1), (i+1), (j-1), (j+1));
			}
			else if((i == 0 &amp;&amp; j &gt; 0) &amp;&amp; j &lt; (NO_OF_COLS-1))  {              //top row except first element
				Check_condition (A, B, i, j, i, (i+1), (j-1), (j+1));
			}
			else if((i == (NO_OF_ROWS-1) &amp;&amp; j &gt; 0) &amp;&amp; j &lt; (NO_OF_COLS-1)) {   //bottom row except first element
				Check_condition (A, B, i, j, (i-1), i, (j-1), (j+1));
			}
			else if((i &lt; NO_OF_ROWS) &amp;&amp; j == 0)			//extreme left column
			{
				if(i &lt; (NO_OF_ROWS-1) &amp;&amp; i &gt; 0) {
					Check_condition (A, B, i, j, (i-1), (i+1), j, j+1);
				}
				if(i == (NO_OF_ROWS-1))	{					// element 1 from last row from left
					Check_condition (A, B, i, j, (i-1), i, j, (j+2));
				}
				if(i == 0 )	{								// element 1 from first row from left
					Check_condition (A, B, i, j, i, (i+1), j, (j+1));
				}
			}
			else if((i &lt; NO_OF_ROWS) &amp;&amp; j == (NO_OF_COLS-1))		//extreme right column
			{
				if(i &gt; 0 &amp;&amp; i &lt; (NO_OF_ROWS-1))	{
					Check_condition (A, B, i, j, (i-1), (i-1), (j-1), j);	//last column except top and bottom element
				}
				if(i == 0)	{
					Check_condition (A, B, i, j, i, (i+1), (j-1), (j+1));	//top location of right column
				}
				if(i == (NO_OF_ROWS-1))	{
					Check_condition (A, B, i, j, (i-1), i, (j-1), j);	//bottom location of right column
				}
			}
		}
	}
	Array_shift(A, B, NO_OF_ROWS, NO_OF_COLS);	// Copying the array A elements to array B
}
void bactarial_simulation (char **A , char **B, unsigned int NO_OF_ROWS, unsigned int NO_OF_COLS)
{
	display (A, NO_OF_ROWS, NO_OF_COLS);		//display the array
	while (1) {
		char opt; 
		std::cout &lt;&lt; &quot;t)ick, q)uit? &quot;;	//prompt user to tick t to continue or q to quit
		std::cin &gt;&gt; opt;
		if (opt == 't')	{
			simulation_algorithm (A, B, NO_OF_ROWS, NO_OF_COLS);	//main logic of the program
			display (A, NO_OF_ROWS, NO_OF_COLS);			//display the new generation
		}
		else if (opt == 'q')
			break;
	}
	for(unsigned int i=0 ; i &lt; NO_OF_ROWS; i++) {
		free (A[i]);
		free (B[i]);	// courtesy -&gt; stackoverflow
	}
	free (A);
	free (B);
}
int main (void)
{
	FILE *fptr;
	unsigned int NO_OF_ROWS = 0, NO_OF_COLS = 0;
<A NAME="6"></A>	std::cout &lt;&lt; &quot;Welcome to a simulation of the lifecycle of a bacteria colony.\nCells (X) live and die by the following rules:\n&quot;;
	std::cout &lt;&lt; &quot; - A cell with 1 or fewer neighbors dies.\n - Locations with 2 neighbors remain stable.\n - Locations with 3 neighbors will create life.\n - A cell with 4 or more neighbors dies.&quot;;
	std::cout &lt;&lt; &quot;\n\nGrid input file name? &quot;;
<FONT color="#50ebec"><div style="position:absolute;left:0"><A HREF="javascript:ZweiFrames('match16-0.html#6',2,'match16-top.html#6',1)"><IMG SRC="back.gif" ALT="other" BORDER="0" ALIGN="left"></A></div><B>	char fileName[20];
	gets (fileName);
	
	fptr = fopen(fileName,&quot;r&quot;);
	if(fptr == NULL)	{
		printf(&quot;Error! File not found...Press any key to exit&quot;);
		exit (0);
	} 
	fscanf(fptr,&quot;%d\n%d\n&quot;,&amp;NO_OF_ROWS, &amp;NO_OF_COLS);	//input rows and cols from .txt file

	char **A = (char **) malloc (sizeof(char *) * NO_OF_ROWS);	//allocating 2-dimensional memory dynamically for Array. Syntex help from stackoverflow
	for (unsigned int i = 0; i &lt; NO_OF_ROWS; i++)	{
		A[i] = (char *) malloc (sizeof(char) * NO_OF_COLS);
	}	
	char **B = (char **) malloc (sizeof(char *) * NO_OF_ROWS);	//2-d array for storing the new created pattern
	for (unsigned int i = 0; i &lt; NO_OF_ROWS; i++)	{
		B[i] = (char *) malloc (sizeof(char) * NO_OF_COLS);
	}</B></FONT>
	fileInput(fptr,A, NO_OF_ROWS, NO_OF_COLS);  // fileInput(); function to input file content
	bactarial_simulation (A, B, NO_OF_ROWS, NO_OF_COLS);

	return 0;
}
</PRE>
</BODY>
</HTML>
