<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
 <TITLE>Muhammad Ehsan_Khan_dip assignment code .cpp</TITLE>
<META http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <script type="text/javascript">
  <!--
   function ZweiFrames(URL1,F1,URL2,F2)
   {
    parent.frames[F1].location.href=URL1;
    parent.frames[F2].location.href=URL2;
   }
  //-->
  </script>
</HEAD>
<BODY BGCOLOR="#ffffff">
<HR>
<H3><CENTER>Muhammad Ehsan_Khan_dip assignment code .cpp</CENTER></H3><HR>
<PRE>

#include&lt;stdio.h&gt;
#include&lt;iostream&gt;
#include&lt;new&gt;
using namespace std;
#include &lt;stdio.h&gt;
#include&lt;stdlib.h&gt;
#include&lt;windows.h&gt;
#include&lt;cmath&gt;
#include&lt;conio.h&gt;
int size1(int , int  , int , int );
int size2(int , int );

FILE * fp;
FILE * fp1;
FILE * fp2;
int  mystring[50];
char fnameout[50];
char fnamein[70];
char fnamein2[70];
long int width,height,size,size3;
int a,noofc,noofc1,sod;

 int color_palette[1024];
 unsigned long int *data;
 int **ary ;
 int **ary1;
 int **ary2; 
 
 void convert(long int a, int a1,int a2, int a3, int a4)
 {

 	unsigned long int longInt =a;
 unsigned int byteArray[4];
 
 /////////////////////// convert from an unsigned long int to a 4-byte array
 byteArray[0] = (int)((longInt &gt;&gt; 24) &amp; 0xFF) ;
 byteArray[1] = (int)((longInt &gt;&gt; 16) &amp; 0xFF) ;
 byteArray[2] = (int)((longInt &gt;&gt; 8)  &amp; 0XFF);
 byteArray[3] = (int)((longInt &amp; 0XFF));

 mystring[a1]=byteArray[3];
 mystring[a2]=byteArray[2];
 mystring[a3]=byteArray[1];
 mystring[a4]=byteArray[0];



 }
int Screen_1()
{	system(&quot;cls&quot;);
	char a;
	cout&lt;&lt;&quot;\n\n - Read image and print information (Press P)\n - Convert 24 bit to 8bit gray scale (Press G)\n  - Translate Image (Press T)\n  - Exit (Press X )\n   &quot;;
	
	while(1)
	{
		cin&gt;&gt;a;
		if(a=='P')
			return 0;
		else if(a=='G')
			return 1;
		
		else if(a=='T')
			return 3;
		
		else if(a=='X')
			return 5;
		else 
			continue;

	}
}
void Screen_2()
{
	system(&quot;cls&quot;);
	long int size,width,height,sod;
	int  noofc;
	
	cout&lt;&lt;&quot;       \n Enter file name eg(abc.BMP) :  &quot;;
	cin&gt;&gt;fnamein;
	
	
	 fp = fopen( fnamein ,&quot;rb&quot;);
	 if (fp==NULL)
	 {
		 cout&lt;&lt;&quot; Error opening file\n&quot;;
	 }
	 else
	 {	 
		 cout&lt;&lt;&quot; File opened succesfully\n&quot;;
		 for(int z=0;z&lt;54;z++)
		 {mystring[z]= int(fgetc(fp));}
		 
	 }


	// fclose(fp);

	 if((mystring[0]==66)&amp;&amp;(mystring[1]==77))
		 {cout&lt;&lt;&quot; It is a Valid bmp file\n&quot;;}
	 else 
	    {cout&lt;&lt;&quot; It is not a valid file\n&quot;;}
	    cout&lt;&lt;&quot; File information\n&quot;;
		size   = size1(mystring[2], mystring[3], mystring[4], mystring[5]);
		width  = size1(mystring[18], mystring[19], mystring[20], mystring[21]);
		height = size1(mystring[22], mystring[23], mystring[24], mystring[25]);
		sod    = size1(mystring[10], mystring[11], mystring[12], mystring[13]);
		noofc  = size2(mystring[28], mystring[29]);
		//cout&lt;&lt;mystring[28]&lt;&lt;&quot;    &quot;&lt;&lt;mystring[29]&lt;&lt;endl;
		cout&lt;&lt;&quot; Size : &quot;&lt;&lt;size&lt;&lt;&quot;\n Width : &quot;&lt;&lt;width&lt;&lt;&quot;\n\n Height : &quot;&lt;&lt;height&lt;&lt;&quot;\n\n Resolution : &quot;&lt;&lt;height*width&lt;&lt; &quot;\n\n sod: &quot;&lt;&lt;sod&lt;&lt;&quot;\n\n No of colour : &quot;&lt;&lt;noofc;
		char c;
		cout&lt;&lt;&quot; \n Press enter to go to main menu&quot;;
		
		 while(1)
		{
			 c = getch();
			if(c==13)
			 break;
		 }
	 
	
  
}

void screen_3()
{
	system(&quot;cls&quot;);
	
	
	cout&lt;&lt;&quot; \n Enter output file name eg(abc.BMP) : \n &quot;;
	cin&gt;&gt;fnameout;
/*
	 fp = fopen(fnamein ,&quot;rb&quot;);
	 if (fp==NULL)
	 {
		 cout&lt;&lt;&quot; \n Error opening file\n&quot;;
	 }
	 else
	 {	 
		 cout&lt;&lt;&quot; \n File opened succesfully\n&quot;;
		 for(int z=0;z&lt;54;z++)
		 mystring[z]= (fgetc(fp));
		
	 }

	 if((mystring[0]==66)&amp;&amp;(mystring[1]==77))
		 {
			 cout&lt;&lt;&quot; It is a Valid bmp file\n&quot;;
		}
	 else 
	     {
			cout&lt;&lt;&quot; It is not a valid file\n&quot;;
		//	exit(0);
		 }*/
	              //  File information
		size = size1(mystring[2], mystring[3], mystring[4], mystring[5]);
		width = size1(mystring[18], mystring[19], mystring[20], mystring[21]);
		height = size1(mystring[22], mystring[23], mystring[24], mystring[25]);
		sod = size1(mystring[10], mystring[11], mystring[12], mystring[13]);
		noofc=size2(mystring[28], mystring[29]);
		noofc1 = size1(mystring[46], mystring[47], mystring[48], mystring[49]);
		size3 = size1(mystring[34], mystring[35], mystring[36], mystring[37]);
		//cout&lt;&lt;&quot;\n Width : &quot;&lt;&lt;width&lt;&lt;&quot;\n Height : &quot;&lt;&lt;height&lt;&lt;&quot;\n No of colour : &quot;&lt;&lt;noofc&lt;&lt;&quot;no fo c&quot;&lt;&lt;noofc1&lt;&lt;endl;
		data=new unsigned long int[height*width];
		int red=0;
		int green=0;
		int blue=0;
		for(long int z=0;z&lt;(height*width);z++)
			{
				red=int(fgetc(fp));
				green=int(fgetc(fp));
				blue=int(fgetc(fp));
				data[z]=((0.30*red)+(0.59*green)+(0.11*blue));
		//	cout&lt;&lt;&quot;(&quot; &lt;&lt;z&lt;&lt;&quot;)    &quot; &lt;&lt;data[z]&lt;&lt;&quot;   &quot;;
			//	Sleep(1);
		//	Sleep(20);
			}
	 fclose (fp);
	 size=size+1024;
	 convert(size,2,3,4,5);
	 size3=size3+1024;
     convert(size3,34,35,36,37);
	 sod=54+1024;
	 convert(1078,10,11,12,13);
	 mystring[28]=8;
	 convert(256,46,47,48,49);
	 convert(size3,34,35,36,37);

	
     for (int i = 0; i &lt; 256; i++)
		{
			color_palette[(i * 4) + 0] =(byte)i; //blue
			color_palette[(i * 4) + 1] = (byte)i; //green
			color_palette[(i * 4 )+ 2] = (byte)i; //red
			color_palette[(i * 4 )+ 3] =(byte)0; //padding
		}

			
	fp1=fopen(fnameout,&quot;wb&quot;);
	if(fp1!=NULL) 
		{
			cout&lt;&lt;&quot; File sucessfully converted into 8-bit gry scale\n&quot;;
			for(int a=0;a&lt;54;a++)
				{
					fputc(char(mystring[a]),fp1);
				}

			for (int i2 = 0; i2 &lt; 256; i2++)
				{
				   fputc((color_palette[(i2 * 4 )+ 0]),fp1); //blue
				   fputc((color_palette[(i2 * 4 )+ 1]),fp1); //green
					fputc((color_palette[(i2 *4) + 2]),fp1); //red
				   fputc((color_palette[(i2 * 4 )+ 3]),fp1); //padding
				}
		for(long int a=0;a&lt;height*width;a++)
			{
				fputc(char(data[a]),fp1);
			}
		fclose(fp1);
	
	}
	else 
		cout&lt;&lt;&quot;File not created&quot;;

	char c;
	cout&lt;&lt;&quot; \n Press enter to go to main menu&quot;;
		
		 while(1)
		{
			 c = getch();
			if(c==13)
			 break;
		 }
	
}

void Screen_5()
{
	cout&lt;&lt;&quot;\n\n Enter the name of output file : &quot;;
	cin&gt;&gt;fnameout;
		ary = new int*[height];
<A NAME="0"></A>	for(int i = 0; i &lt; height; ++i) {
		ary[i] = new int[width];}
	
<FONT color="#0000ff"><A HREF="javascript:ZweiFrames('match3-1.html#0',3,'match3-top.html#0',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>	int a1=0;
	for(int q=0; q&lt;height;q++)
	{
		for(int p=0;p&lt;width;p++)
		{
			ary[q][p]=data[a1];
			a1++;
		}
	}</B></FONT>


	
	system(&quot;cls&quot;);	
	int x,y; unsigned int x1,y1;
	cout&lt;&lt;&quot;\n Enter x translation : &quot;;
	cin&gt;&gt;x;
	cout&lt;&lt;&quot;\n Enter y translation : &quot;;
	cin&gt;&gt;y;
	if(x&lt;0)
	x1=(-1)*x;
	else
		x1=x;
	if(y&lt;0)
		y1=(-1)*y;
	else
	y1=y;
	convert(width+x1,18,19,20,21);
	convert(height+y1,22,23,24,25);
	fp1=fopen(fnameout,&quot;wb&quot;);
	if(fp1!=NULL) 
		{
			cout&lt;&lt;&quot;\n File created&quot;;
			for(int a=0;a&lt;54;a++)
				{
					fputc(char(mystring[a]),fp1);
				}

			for (int i2 = 0; i2 &lt; 256; i2++)
				{
				   fputc((color_palette[(i2 * 4 )+ 0]),fp1); //blue
				   fputc((color_palette[(i2 * 4 )+ 1]),fp1); //green
					fputc((color_palette[(i2 *4) + 2]),fp1); //red
				   fputc((color_palette[(i2 * 4 )+ 3]),fp1); //padding
				}



<A NAME="1"></A>
	

<FONT color="#f63526"><A HREF="javascript:ZweiFrames('match3-1.html#1',3,'match3-top.html#1',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>	if((x&gt;=0)&amp;&amp;(y&gt;=0))
	{
		for(int z=0;z&lt;height;z++)
			
			{
				for(int c=0;c&lt;x;c++)
				{fputc(0,fp1);}</B></FONT>
<A NAME="2"></A>				for(int c=0;c&lt;width;c++)
				{
					fputc(char(ary[z][c]),fp1);
<FONT color="#77bfc7"><A HREF="javascript:ZweiFrames('match3-1.html#2',3,'match3-top.html#2',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>				}
		     }

		
		for(int z=0;z&lt;y;z++)
			
			{
				for(int c=0;c&lt;x+width;c++)
				{fputc(0,fp1);}</B></FONT>
				
		  }
	
<A NAME="3"></A>	}


<FONT color="#6cc417"><A HREF="javascript:ZweiFrames('match3-1.html#3',3,'match3-top.html#3',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>	if((x&gt;=0)&amp;&amp;(y&lt;=0))
	{

		for(int z=0;z&lt;y1;z++)
<A NAME="4"></A>			
			{
				for(int c=0;c&lt;x+width;c++)
				{fputc(0,fp1);}</B></FONT><FONT color="#151b8d"><A HREF="javascript:ZweiFrames('match3-1.html#4',3,'match3-top.html#4',1)"><IMG SRC="forward.gif" ALT="other" BORDER="0" ALIGN="right"></A><B>
				
		  }


		for(int z=0;z&lt;height;z++)
			
			{
				for(int c=0;c&lt;x;c++)
				{fputc(0,fp1);}</B></FONT>
				for(int c=0;c&lt;width;c++)
				{
					fputc(char(ary[z][c]),fp1);
				}
		     }
		}


	///////
	
	if((x&lt;=0)&amp;&amp;(y&gt;=0))
	{
		for(int z=0;z&lt;height;z++)
			
			{
				
				for(int c=0;c&lt;width;c++)
				{
					fputc(char(ary[z][c]),fp1);
				}
				for(int c=0;c&lt;x1;c++)
				{fputc(0,fp1);}
		     }

		
		for(int z=0;z&lt;y;z++)
			
			{
				for(int c=0;c&lt;x1+width;c++)
				{fputc(0,fp1);}
				
		  }
	
	}//////////////



	if((x&lt;=0)&amp;&amp;(y&lt;=0))
	{

		for(int z=0;z&lt;y1;z++)
			
			{
				for(int c=0;c&lt;x1+width;c++)
				{fputc(0,fp1);}
				
		  }


		for(int z=0;z&lt;height;z++)
			
			{
				
				for(int c=0;c&lt;width;c++)
				{
					fputc(char(ary[z][c]),fp1);
				}
				for(int c=0;c&lt;x1;c++)
				{fputc(0,fp1);}
		     }
		}
//////////

	}
		fclose(fp1);

		char c;
	cout&lt;&lt;&quot; \n Press enter to go to main menu&quot;;
		
		 while(1)
		{
			for (int i = 0; i &lt;height; i++)
			delete[] ary[i];
			delete[] ary;
			 c = getch();
			if(c==13)
			 break;
		 }
	

}

//**********************************************************

	

	//****************************
	 unsigned char* newData = new unsigned char[width1*height1*1];

        double scaleWidth = (double)width1/(double)width;
        double scaleHeight = (double) height1/(double)height;

        int pixel = 0;
				 for(int y = 0; y &lt; height1; y++) 

				 {
            for(int x = 0; x &lt; width1; x++) 
			
			{
				 int nearestMatch = ((int)(y/scaleHeight)*(width*1))+((int)(x/scaleWidth)*1);
				 newData[pixel]   = data[nearestMatch];
				 pixel++;
            }
        }
      


			
		
	fp1=fopen(fnameout,&quot;wb&quot;);
	if(fp1!=NULL) 
		{
			cout&lt;&lt;&quot;\n File created&quot;;
			for(int a=0;a&lt;54;a++)
				{
					fputc(char(mystring[a]),fp1);
				}

			for (int i2 = 0; i2 &lt; 256; i2++)
				{
				   fputc((color_palette[(i2 * 4 )+ 0]),fp1); //blue
				   fputc((color_palette[(i2 * 4 )+ 1]),fp1); //green
					fputc((color_palette[(i2 *4) + 2]),fp1); //red
				   fputc((color_palette[(i2 * 4 )+ 3]),fp1); //padding
				}


	{
		
		for(int q=0;q&lt;width1*height1;q++)
		{
			{
				
				fputc(char(newData[q]),fp1);
				
					
			}
		}
}
			
		fclose(fp1);
	
	}
	else 
		cout&lt;&lt;&quot;File not created&quot;;

	char c;
	cout&lt;&lt;&quot; \n Press enter to go to main menu&quot;;
		
		 while(1)
		{
			 c = getch();
			if(c==13)
			 break;
		 }
	

}




//*************************************************************
int size1(int Byte1, int Byte2 , int Byte3, int Byte4)
{
	long int SIZE;
	SIZE=Byte1+Byte2*256+Byte3*256*256+Byte4*256*256*256;
	return SIZE;
}
int size2(int byte1 , int byte2)
{
	int size;
	size= byte1+byte2*256;
	return size;
}
 

 
 void main()
 {
while(1)
{
	 int a;
	a=Screen_1();
	if(a==0)
		{Screen_2();
	a=9;}
	if(a==1)
		{screen_3();
	
	a=9;}
	if(a==3)
		{Screen_5();
	
	a=9;}
	if(a==5)
		exit(0);
	
}
	 system(&quot;PAUSE&quot;);
	
	
 }
</PRE>
</BODY>
</HTML>
