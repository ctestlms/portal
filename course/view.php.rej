***************
*** 317,322 ****
  					 GROUP BY ats.id";
  			
  					$data = $DB->get_records_sql($qry);
  						$statsarray = array();
  					
  						foreach ($data as $status) {
--- 309,321 ----
  					 GROUP BY ats.id";
  			
  					$data = $DB->get_records_sql($qry);
+ 					
+ 					//print_r($data);
+ 					if(!$data) {
+ 						// dont show anything
+ 					}
+ 					else {
+ 						
  						$statsarray = array();
  					
  						foreach ($data as $status) {
***************
*** 355,360 ****
  										$statsarray[$status->statusid]->stcnt = $status->stcnt * 1.5;
  									}
  									break;
  								default:
  									if (array_key_exists($status->statusid, $statsarray))
  										$statsarray[$status->statusid]->stcnt = $statsarray[$status->statusid]->stcnt + $status->stcnt;
--- 354,375 ----
  										$statsarray[$status->statusid]->stcnt = $status->stcnt * 1.5;
  									}
  									break;
+ 								case "Two Hours Ward":
+ 									if (array_key_exists($status->statusid, $statsarray))
+ 										$statsarray[$status->statusid]->stcnt = $statsarray[$status->statusid]->stcnt + ($status->stcnt * 2);
+ 									else {
+ 										$statsarray[$status->statusid]->statusid = $status->statusid;
+ 										$statsarray[$status->statusid]->stcnt = $status->stcnt * 2;
+ 									}
+ 									break;
+ 								case "Four Hours Ward":
+ 									if (array_key_exists($status->statusid, $statsarray))
+ 										$statsarray[$status->statusid]->stcnt = $statsarray[$status->statusid]->stcnt + ($status->stcnt * 4);
+ 									else {
+ 										$statsarray[$status->statusid]->statusid = $status->statusid;
+ 										$statsarray[$status->statusid]->stcnt = $status->stcnt * 4;
+ 									}
+ 									break;
  								default:
  									if (array_key_exists($status->statusid, $statsarray))
  										$statsarray[$status->statusid]->stcnt = $statsarray[$status->statusid]->stcnt + $status->stcnt;
***************
*** 394,460 ****
  						}
  						if($percent >= 75 && $percent <= 80) {
  
-                         echo "<b><div style='width:100%;position:relative;'>
- 									<div style='width:90%; height:50px;overflow:hidden; margin: auto;background-color:#FF9900;'>
- 										<div style='width:100%; height:100%; float:left; display: inline-block; font-style:bold; 
- 										font-size:110%;margin: auto;margin-top:4px;padding-top:10px;text-align:center; color:white;'>
- 										Your attendance is low in this course. You may fall short of the required attendance (i.e. below 75%). Your  attendance is ".($percent)."%.
  										</div>
- 									</div>
- 								</div></b><br/>";
- 					}	
  		}
- 	}  // end of attendance short notice
- 
- //AddedBy Hina Yousuf//feedback message
- 
-         if($roleid->roleid==5)
- 
-         {
- 
-                 $flag=false;
- 		  $sql="SELECT * from {feedback} f WHERE course =$course->id and name like '%Student Feedback%'";
- 
-             $feedbacks    =$DB->get_records_sql($sql);
-             foreach($feedbacks as $feedback ){
-             $timeAfterOneWeek = strtotime("+7 days",  $feedback->timeopen);
- 
-                 if($feedback && time()>$timeAfterOneWeek && time()<= $feedback->timeclose){
- 
-                         $coursemodule=$DB->get_record_sql("SELECT * from {course_modules} cm WHERE course =$course->id and instance=$feedback->id and module=23");
-                         if(!groups_course_module_visible($coursemodule)){
-                             continue;
-                         }
- //echo "SELECT id from {course_modules} cm WHERE course =$course->id and instance=$feedback->id";
- 
-                         $sql="select * from {feedback_completed} f where feedback=$feedback->id and userid=$USER->id ";
- 
-                         echo "&nbsp;";
- 
-                         if(!$completed = $DB->get_record_sql($sql)) {
- 
-                                 $flag=true;
- 
-                                 $link="<a href='{$CFG->wwwroot}/mod/feedback/view.php?id={$coursemodule->id}' target='_blank'>".$course->fullname."</a>";
- 
-                                 $url="{$CFG->wwwroot}/mod/feedback/complete.php?id={$coursemodule->id}&courseid=&gopage=0&feedback=1";               
- 
-                                 redirect($url);
- 
-                         }
- }
-    }
- 
-         }
- 
-         ////end of feedback not given message
-          ///Download Course material
-                 //Added By Hina Yousuf
-                 if(has_capability('moodle/course:downloadmaterial', $context)) {
-                         echo                    '<form method="post" style="display: inline; margin: 0; padding: 0;">';
-                         echo                    '<input type="hidden" name="download" value="true" /><input type="submit" value="Download Course Material" /></form>';
-                 }
-                 //end
  
      // get information about course modules and existing module types
      // format.php in course formats may rely on presence of these variables
--- 409,429 ----
  						}
  						if($percent >= 75 && $percent <= 80) {
  
+ 							echo "<b><div style='width:100%;position:relative;'>
+ 										<div style='width:90%; height:50px;overflow:hidden; margin: auto;background-color:#FF9900;'>
+ 											<div style='width:100%; height:100%; float:left; display: inline-block; font-style:bold; 
+ 											font-size:110%;margin: auto;margin-top:4px;padding-top:10px;text-align:center; color:white;'>
+ 											Your attendance is low in this course. You may fall short of the required attendance (i.e. below 75%). Your  attendance is ".($percent)."%.
+ 											</div>
  										</div>
+ 									</div></b><br/>";
+ 						}
+ 					}
+ 										
+ 						
+ 			}
  		}
+ 	//}  // end of attendance short notice
  
      // get information about course modules and existing module types
      // format.php in course formats may rely on presence of these variables
